{"ast":null,"code":"import * as dom from './dom/index.js';\nimport { swalClasses } from './classes.js';\nimport { fixScrollbar } from './scrollbarFix.js';\nimport { iOSfix } from './iosFix.js';\nimport { IEfix } from './ieFix.js';\nimport { setAriaHidden } from './aria.js';\nimport globalState from '../globalState.js';\n/**\n * Open popup, add necessary classes and styles, fix scrollbar\n *\n * @param {Array} params\n */\n\nexport const openPopup = params => {\n  const container = dom.getContainer();\n  const popup = dom.getPopup();\n\n  if (typeof params.onBeforeOpen === 'function') {\n    params.onBeforeOpen(popup);\n  }\n\n  addClasses(container, popup, params); // scrolling is 'hidden' until animation is done, after that 'auto'\n\n  setScrollingVisibility(container, popup);\n\n  if (dom.isModal()) {\n    fixScrollContainer(container, params.scrollbarPadding);\n  }\n\n  if (!dom.isToast() && !globalState.previousActiveElement) {\n    globalState.previousActiveElement = document.activeElement;\n  }\n\n  if (typeof params.onOpen === 'function') {\n    setTimeout(() => params.onOpen(popup));\n  }\n\n  dom.removeClass(container, swalClasses['no-transition']);\n};\n\nfunction swalOpenAnimationFinished(event) {\n  const popup = dom.getPopup();\n\n  if (event.target !== popup) {\n    return;\n  }\n\n  const container = dom.getContainer();\n  popup.removeEventListener(dom.animationEndEvent, swalOpenAnimationFinished);\n  container.style.overflowY = 'auto';\n}\n\nconst setScrollingVisibility = (container, popup) => {\n  if (dom.animationEndEvent && dom.hasCssAnimation(popup)) {\n    container.style.overflowY = 'hidden';\n    popup.addEventListener(dom.animationEndEvent, swalOpenAnimationFinished);\n  } else {\n    container.style.overflowY = 'auto';\n  }\n};\n\nconst fixScrollContainer = (container, scrollbarPadding) => {\n  iOSfix();\n  IEfix();\n  setAriaHidden();\n\n  if (scrollbarPadding) {\n    fixScrollbar();\n  } // sweetalert2/issues/1247\n\n\n  setTimeout(() => {\n    container.scrollTop = 0;\n  });\n};\n\nconst addClasses = (container, popup, params) => {\n  dom.addClass(container, params.showClass.backdrop);\n  dom.show(popup); // Animate popup right after showing it\n\n  dom.addClass(popup, params.showClass.popup);\n  dom.addClass([document.documentElement, document.body], swalClasses.shown);\n\n  if (params.heightAuto && params.backdrop && !params.toast) {\n    dom.addClass([document.documentElement, document.body], swalClasses['height-auto']);\n  }\n};","map":{"version":3,"sources":["/home/bmenezes/my-app/node_modules/sweetalert2/src/utils/openPopup.js"],"names":["dom","swalClasses","fixScrollbar","iOSfix","IEfix","setAriaHidden","globalState","openPopup","params","container","getContainer","popup","getPopup","onBeforeOpen","addClasses","setScrollingVisibility","isModal","fixScrollContainer","scrollbarPadding","isToast","previousActiveElement","document","activeElement","onOpen","setTimeout","removeClass","swalOpenAnimationFinished","event","target","removeEventListener","animationEndEvent","style","overflowY","hasCssAnimation","addEventListener","scrollTop","addClass","showClass","backdrop","show","documentElement","body","shown","heightAuto","toast"],"mappings":"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","sourcesContent":["import * as dom from './dom/index.js'\nimport { swalClasses } from './classes.js'\nimport { fixScrollbar } from './scrollbarFix.js'\nimport { iOSfix } from './iosFix.js'\nimport { IEfix } from './ieFix.js'\nimport { setAriaHidden } from './aria.js'\nimport globalState from '../globalState.js'\n\n/**\n * Open popup, add necessary classes and styles, fix scrollbar\n *\n * @param {Array} params\n */\nexport const openPopup = (params) => {\n  const container = dom.getContainer()\n  const popup = dom.getPopup()\n\n  if (typeof params.onBeforeOpen === 'function') {\n    params.onBeforeOpen(popup)\n  }\n\n  addClasses(container, popup, params)\n\n  // scrolling is 'hidden' until animation is done, after that 'auto'\n  setScrollingVisibility(container, popup)\n\n  if (dom.isModal()) {\n    fixScrollContainer(container, params.scrollbarPadding)\n  }\n\n  if (!dom.isToast() && !globalState.previousActiveElement) {\n    globalState.previousActiveElement = document.activeElement\n  }\n  if (typeof params.onOpen === 'function') {\n    setTimeout(() => params.onOpen(popup))\n  }\n  dom.removeClass(container, swalClasses['no-transition'])\n}\n\nfunction swalOpenAnimationFinished (event) {\n  const popup = dom.getPopup()\n  if (event.target !== popup) {\n    return\n  }\n  const container = dom.getContainer()\n  popup.removeEventListener(dom.animationEndEvent, swalOpenAnimationFinished)\n  container.style.overflowY = 'auto'\n}\n\nconst setScrollingVisibility = (container, popup) => {\n  if (dom.animationEndEvent && dom.hasCssAnimation(popup)) {\n    container.style.overflowY = 'hidden'\n    popup.addEventListener(dom.animationEndEvent, swalOpenAnimationFinished)\n  } else {\n    container.style.overflowY = 'auto'\n  }\n}\n\nconst fixScrollContainer = (container, scrollbarPadding) => {\n  iOSfix()\n  IEfix()\n  setAriaHidden()\n\n  if (scrollbarPadding) {\n    fixScrollbar()\n  }\n\n  // sweetalert2/issues/1247\n  setTimeout(() => {\n    container.scrollTop = 0\n  })\n}\n\nconst addClasses = (container, popup, params) => {\n  dom.addClass(container, params.showClass.backdrop)\n  dom.show(popup)\n  // Animate popup right after showing it\n  dom.addClass(popup, params.showClass.popup)\n\n  dom.addClass([document.documentElement, document.body], swalClasses.shown)\n  if (params.heightAuto && params.backdrop && !params.toast) {\n    dom.addClass([document.documentElement, document.body], swalClasses['height-auto'])\n  }\n}\n"]},"metadata":{},"sourceType":"module"}