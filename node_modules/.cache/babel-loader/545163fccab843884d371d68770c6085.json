{"ast":null,"code":"import { undoScrollbar } from '../utils/scrollbarFix.js';\nimport { undoIOSfix } from '../utils/iosFix.js';\nimport { undoIEfix } from '../utils/ieFix.js';\nimport { unsetAriaHidden } from '../utils/aria.js';\nimport * as dom from '../utils/dom/index.js';\nimport { swalClasses } from '../utils/classes.js';\nimport globalState, { restoreActiveElement } from '../globalState.js';\nimport privateProps from '../privateProps.js';\nimport privateMethods from '../privateMethods.js';\n/*\n * Instance method to close sweetAlert\n */\n\nfunction removePopupAndResetState(instance, container, isToast, onAfterClose) {\n  if (isToast) {\n    triggerOnAfterCloseAndDispose(instance, onAfterClose);\n  } else {\n    restoreActiveElement().then(() => triggerOnAfterCloseAndDispose(instance, onAfterClose));\n    globalState.keydownTarget.removeEventListener('keydown', globalState.keydownHandler, {\n      capture: globalState.keydownListenerCapture\n    });\n    globalState.keydownHandlerAdded = false;\n  }\n\n  if (container.parentNode && !document.body.getAttribute('data-swal2-queue-step')) {\n    container.parentNode.removeChild(container);\n  }\n\n  if (dom.isModal()) {\n    undoScrollbar();\n    undoIOSfix();\n    undoIEfix();\n    unsetAriaHidden();\n  }\n\n  removeBodyClasses();\n}\n\nfunction removeBodyClasses() {\n  dom.removeClass([document.documentElement, document.body], [swalClasses.shown, swalClasses['height-auto'], swalClasses['no-backdrop'], swalClasses['toast-shown'], swalClasses['toast-column']]);\n}\n\nexport function close(resolveValue) {\n  const popup = dom.getPopup();\n\n  if (!popup) {\n    return;\n  }\n\n  const innerParams = privateProps.innerParams.get(this);\n\n  if (!innerParams || dom.hasClass(popup, innerParams.hideClass.popup)) {\n    return;\n  }\n\n  const swalPromiseResolve = privateMethods.swalPromiseResolve.get(this);\n  dom.removeClass(popup, innerParams.showClass.popup);\n  dom.addClass(popup, innerParams.hideClass.popup);\n  const backdrop = dom.getContainer();\n  dom.removeClass(backdrop, innerParams.showClass.backdrop);\n  dom.addClass(backdrop, innerParams.hideClass.backdrop);\n  handlePopupAnimation(this, popup, innerParams); // Resolve Swal promise\n\n  swalPromiseResolve(resolveValue || {});\n}\n\nconst handlePopupAnimation = (instance, popup, innerParams) => {\n  const container = dom.getContainer(); // If animation is supported, animate\n\n  const animationIsSupported = dom.animationEndEvent && dom.hasCssAnimation(popup);\n  const {\n    onClose,\n    onAfterClose\n  } = innerParams;\n\n  if (onClose !== null && typeof onClose === 'function') {\n    onClose(popup);\n  }\n\n  if (animationIsSupported) {\n    animatePopup(instance, popup, container, onAfterClose);\n  } else {\n    // Otherwise, remove immediately\n    removePopupAndResetState(instance, container, dom.isToast(), onAfterClose);\n  }\n};\n\nconst animatePopup = (instance, popup, container, onAfterClose) => {\n  globalState.swalCloseEventFinishedCallback = removePopupAndResetState.bind(null, instance, container, dom.isToast(), onAfterClose);\n  popup.addEventListener(dom.animationEndEvent, function (e) {\n    if (e.target === popup) {\n      globalState.swalCloseEventFinishedCallback();\n      delete globalState.swalCloseEventFinishedCallback;\n    }\n  });\n};\n\nconst triggerOnAfterCloseAndDispose = (instance, onAfterClose) => {\n  setTimeout(() => {\n    if (typeof onAfterClose === 'function') {\n      onAfterClose();\n    }\n\n    instance._destroy();\n  });\n};\n\nexport { close as closePopup, close as closeModal, close as closeToast };","map":{"version":3,"sources":["/home/bmenezes/my-app/node_modules/sweetalert2/src/instanceMethods/close.js"],"names":["undoScrollbar","undoIOSfix","undoIEfix","unsetAriaHidden","dom","swalClasses","globalState","restoreActiveElement","privateProps","privateMethods","removePopupAndResetState","instance","container","isToast","onAfterClose","triggerOnAfterCloseAndDispose","then","keydownTarget","removeEventListener","keydownHandler","capture","keydownListenerCapture","keydownHandlerAdded","parentNode","document","body","getAttribute","removeChild","isModal","removeBodyClasses","removeClass","documentElement","shown","close","resolveValue","popup","getPopup","innerParams","get","hasClass","hideClass","swalPromiseResolve","showClass","addClass","backdrop","getContainer","handlePopupAnimation","animationIsSupported","animationEndEvent","hasCssAnimation","onClose","animatePopup","swalCloseEventFinishedCallback","bind","addEventListener","e","target","setTimeout","_destroy","closePopup","closeModal","closeToast"],"mappings":"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","sourcesContent":["import { undoScrollbar } from '../utils/scrollbarFix.js'\nimport { undoIOSfix } from '../utils/iosFix.js'\nimport { undoIEfix } from '../utils/ieFix.js'\nimport { unsetAriaHidden } from '../utils/aria.js'\nimport * as dom from '../utils/dom/index.js'\nimport { swalClasses } from '../utils/classes.js'\nimport globalState, { restoreActiveElement } from '../globalState.js'\nimport privateProps from '../privateProps.js'\nimport privateMethods from '../privateMethods.js'\n\n/*\n * Instance method to close sweetAlert\n */\n\nfunction removePopupAndResetState (instance, container, isToast, onAfterClose) {\n  if (isToast) {\n    triggerOnAfterCloseAndDispose(instance, onAfterClose)\n  } else {\n    restoreActiveElement().then(() => triggerOnAfterCloseAndDispose(instance, onAfterClose))\n    globalState.keydownTarget.removeEventListener('keydown', globalState.keydownHandler, { capture: globalState.keydownListenerCapture })\n    globalState.keydownHandlerAdded = false\n  }\n\n  if (container.parentNode && !document.body.getAttribute('data-swal2-queue-step')) {\n    container.parentNode.removeChild(container)\n  }\n\n  if (dom.isModal()) {\n    undoScrollbar()\n    undoIOSfix()\n    undoIEfix()\n    unsetAriaHidden()\n  }\n\n  removeBodyClasses()\n}\n\nfunction removeBodyClasses () {\n  dom.removeClass(\n    [document.documentElement, document.body],\n    [\n      swalClasses.shown,\n      swalClasses['height-auto'],\n      swalClasses['no-backdrop'],\n      swalClasses['toast-shown'],\n      swalClasses['toast-column']\n    ]\n  )\n}\n\nexport function close (resolveValue) {\n  const popup = dom.getPopup()\n\n  if (!popup) {\n    return\n  }\n\n  const innerParams = privateProps.innerParams.get(this)\n  if (!innerParams || dom.hasClass(popup, innerParams.hideClass.popup)) {\n    return\n  }\n  const swalPromiseResolve = privateMethods.swalPromiseResolve.get(this)\n\n  dom.removeClass(popup, innerParams.showClass.popup)\n  dom.addClass(popup, innerParams.hideClass.popup)\n\n  const backdrop = dom.getContainer()\n  dom.removeClass(backdrop, innerParams.showClass.backdrop)\n  dom.addClass(backdrop, innerParams.hideClass.backdrop)\n\n  handlePopupAnimation(this, popup, innerParams)\n\n  // Resolve Swal promise\n  swalPromiseResolve(resolveValue || {})\n}\n\nconst handlePopupAnimation = (instance, popup, innerParams) => {\n  const container = dom.getContainer()\n  // If animation is supported, animate\n  const animationIsSupported = dom.animationEndEvent && dom.hasCssAnimation(popup)\n\n  const { onClose, onAfterClose } = innerParams\n\n  if (onClose !== null && typeof onClose === 'function') {\n    onClose(popup)\n  }\n\n  if (animationIsSupported) {\n    animatePopup(instance, popup, container, onAfterClose)\n  } else {\n    // Otherwise, remove immediately\n    removePopupAndResetState(instance, container, dom.isToast(), onAfterClose)\n  }\n}\n\nconst animatePopup = (instance, popup, container, onAfterClose) => {\n  globalState.swalCloseEventFinishedCallback = removePopupAndResetState.bind(null, instance, container, dom.isToast(), onAfterClose)\n  popup.addEventListener(dom.animationEndEvent, function (e) {\n    if (e.target === popup) {\n      globalState.swalCloseEventFinishedCallback()\n      delete globalState.swalCloseEventFinishedCallback\n    }\n  })\n}\n\nconst triggerOnAfterCloseAndDispose = (instance, onAfterClose) => {\n  setTimeout(() => {\n    if (typeof onAfterClose === 'function') {\n      onAfterClose()\n    }\n    instance._destroy()\n  })\n}\n\nexport {\n  close as closePopup,\n  close as closeModal,\n  close as closeToast\n}\n"]},"metadata":{},"sourceType":"module"}